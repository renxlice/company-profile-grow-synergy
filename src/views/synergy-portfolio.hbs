<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{{description}}">
    <meta name="keywords" content="{{keywords}}">
    <meta name="author" content="{{author}}">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{{ogTitle}}">
    <meta property="og:description" content="{{ogDescription}}">
    <meta property="og:image" content="{{ogImage}}">
    <meta property="og:url" content="{{ogUrl}}">
    <meta property="og:type" content="{{ogType}}">
    <meta property="og:site_name" content="{{siteName}}">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="{{twitterCard}}">
    <meta name="twitter:title" content="{{twitterTitle}}">
    <meta name="twitter:description" content="{{twitterDescription}}">
    <meta name="twitter:image" content="{{twitterImage}}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{canonical}}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics-compat.js"></script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {{{structuredDataJson}}}
    </script>
    
    <!-- Google Analytics -->
    {{#if googleAnalyticsId}}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{googleAnalyticsId}}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{googleAnalyticsId}}');
    </script>
    {{/if}}
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <img src="/images/logo_pt.png" alt="GROW SYNERGY INDONESIA" class="w-12 h-12 md:w-20 md:h-20 rounded-lg object-cover">
                    <a href="/home" class="text-sm md:text-xl font-bold text-gray-800">GROW SYNERGY INDONESIA</a>
                </div>
                
                <div class="hidden md:flex space-x-4 lg:space-x-6">
                    <a href="/home" class="nav-link text-sm lg:text-base hover:text-orange-500 transition-colors" data-page="home">Beranda</a>
                    <a href="/synergy-experts" class="nav-link text-sm lg:text-base hover:text-orange-500 transition-colors" data-page="synergy-experts">Instruktur Data Analitik</a>
                    <a href="/synergy-portfolio" class="nav-link text-sm lg:text-base text-orange-500 font-semibold border-b-2 border-orange-500 pb-1" data-page="synergy-portfolio">Portfolio Alumni</a>
                    <a href="/synergy-academy" class="nav-link text-sm lg:text-base hover:text-orange-500 transition-colors" data-page="synergy-academy">Kursus Data Analitik</a>
                    <a href="/blog" class="nav-link text-sm lg:text-base hover:text-orange-500 transition-colors" data-page="blog">Blog</a>
                </div>
                
                <!-- Mobile Menu -->
                <div id="mobile-menu" class="hidden fixed inset-0 bg-white z-50 md:hidden">
                    <div class="flex flex-col h-full">
                        <div class="flex justify-end items-center p-4 border-b">
                            <button id="close-menu-btn" class="text-gray-600 p-2">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <nav class="flex-1 p-4">
                            <div class="flex flex-col space-y-4">
                                <a href="/home" class="nav-link text-lg py-3 border-b hover:text-orange-500 transition-colors" data-page="home">Beranda</a>
                                <a href="/synergy-experts" class="nav-link text-lg py-3 border-b hover:text-orange-500 transition-colors" data-page="synergy-experts">Instruktur Data Analitik</a>
                                <a href="/synergy-portfolio" class="nav-link text-lg py-3 border-b text-orange-500 font-semibold" data-page="synergy-portfolio">Portfolio Alumni</a>
                                <a href="/synergy-academy" class="nav-link text-lg py-3 border-b hover:text-orange-500 transition-colors" data-page="synergy-academy">Kursus Data Analitik</a>
                                <a href="/blog" class="nav-link text-lg py-3 border-b hover:text-orange-500 transition-colors" data-page="blog">Blog</a>
                                <a href="/about" class="bg-gradient-to-r from-orange-500 to-green-500 text-white px-4 py-3 rounded-lg text-center mt-4" style="background: linear-gradient(to right, #f97316, #4bd68d) !important;">
                                    Tentang Kami
                                </a>
                            </div>
                        </nav>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <a href="/about" class="bg-gradient-to-r from-orange-500 to-green-500 text-white px-1.5 py-0.5 md:px-4 md:py-2 rounded-lg hover:from-orange-600 hover:to-green-600 transition-all duration-300 transform hover:scale-105 shadow-lg !important text-xs md:text-sm" style="background: linear-gradient(to right, #f97316, #4bd68d) !important;">
                        Tentang Kami
                    </a>
                    <button id="mobile-menu-btn" class="md:hidden text-gray-600 p-1">
                        <i class="fas fa-bars text-base"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main>


<!-- Hero Section -->
<div class="hero-section" id="hero-section">
    <div class="background-image" id="hero-background-image" style="background-image: url('/images/hero-background.jpg');"></div>
    <div class="hero-content">
        <h2 class="text-2xl md:text-3xl lg:text-4xl font-light mb-4" id="hero-subtitle">Mastery in Motion</h2>
        <h1 class="text-3xl md:text-4xl lg:text-6xl font-bold mb-6 lg:mb-8" id="hero-title">Synergy Portofolio</h1>
        <p class="text-base md:text-xl mb-6 lg:mb-8 text-center max-w-3xl px-4 lg:px-0" id="hero-description">
            Mengabadikan proses belajar dan karya terbaik hasil program pelatihan intensif kami.
        </p>
    </div>
</div>

<!-- Search Section -->
<section class="py-8 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-2xl mx-auto">
            <div class="relative">
                <input 
                    type="text" 
                    id="searchInput"
                    placeholder="Cari kegiatan..." 
                    class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-gray-900 placeholder-gray-500"
                    style="color: #111827 !important; background-color: white !important;"
                >
                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-700 hover:text-blue-600">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="mt-4 flex flex-wrap gap-2 justify-center">
                <button class="filter-btn px-4 py-2 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700 transition" data-filter="all">
                    All
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Training">
                    Training
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Workshop">
                    Workshop
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Seminar">
                    Seminar
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Bootcamp">
                    Bootcamp
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Web Development">
                    Web Development
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Data Science">
                    Data Science
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="Mobile Development">
                    Mobile Development
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm hover:bg-gray-300 transition" data-filter="UI/UX Design">
                    UI/UX Design
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Synergy Portofolio Section -->
<section class="py-16">
    <div class="container mx-auto px-4">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">
                Pelatihan Terbaik Kami
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
               Synergy Portfolio Galeri karya dan dokumentasi pelatihan teknologi. Transformasi talenta menjadi ahli melalui proyek yang inovatif dan terukur.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="portfolioGrid">
            <!-- Loading indicator -->
            <div id="loadingIndicator" class="col-span-full text-center py-12">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                <p class="mt-4 text-gray-600">Memuat portfolio...</p>
            </div>
            <!-- Portfolio cards will be loaded dynamically from Firestore -->
        </div>
        
        <!-- Pagination -->
        <div class="mt-12 flex justify-center">
            <nav class="flex items-center space-x-2">
                <button class="px-3 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition" data-page="1">
                    1
                </button>
                <button class="px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition" data-page="2">
                    2
                </button>
                <button class="px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition" data-page="3">
                    3
                </button>
                <button class="px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition" data-page="4">
                    4
                </button>
                <button class="px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition" data-page="5">
                    5
                </button>
            </nav>
        </div>
    </div>
</section>

<!-- Portfolio Detail Modal -->
<div id="portfolioModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="flex flex-col h-full bg-white md:max-w-4xl md:mx-auto md:my-4 md:rounded-lg md:max-h-[90vh]">
        <!-- Modal Header -->
        <div class="flex-shrink-0 bg-white border-b p-4 flex justify-between items-center">
            <h2 id="modalTitle" class="text-lg md:text-xl font-bold text-gray-800 pr-8"></h2>
            <button id="closeModal" class="text-gray-600 hover:text-gray-800 text-xl p-2 -mr-2">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Modal Body with Scroll -->
        <div class="flex-1 overflow-y-auto">
            <div class="p-4 md:p-6">
                <div id="modalImage" class="mb-4 md:mb-6"></div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Section -->
<section class="py-16 bg-blue-600 text-white">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div>
                <div class="text-4xl font-bold mb-2">50+</div>
                <p class="text-blue-100">Project Selesai</p>
            </div>
            <div>
                <div class="text-4xl font-bold mb-2">25+</div>
                <p class="text-blue-100">Client Puas</p>
            </div>
            <div>
                <div class="text-4xl font-bold mb-2">15+</div>
                <p class="text-blue-100">Teknologi</p>
            </div>
            <div>
                <div class="text-4xl font-bold mb-2">99%</div>
                <p class="text-blue-100">Tingkat Kepuasan</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-16 text-white" style="background-color: #225273;">
    <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
            A Legacy of Excellence
        </h2>
        <p class="text-xl mb-8 text-white/90">
           Kurasi mahakarya teknologi dan dedikasi talenta terbaik dari ekosistem pelatihan kami.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-gray-800 text-white py-12">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center space-x-2 mb-4">
                    <img src="/images/logo_pt.png" alt="GROW SYNERGY INDONESIA" class="h-8 w-auto">
                    <span class="text-lg font-bold text-black">GROW SYNERGY INDONESIA</span>
                </div>
                <p class="text-gray-400">Platform pelatihan data analitik terbaik di Indonesia dengan instruktur profesional dan sertifikat bersertifikat.</p>
            </div>
            
            <div>
                <h3 class="font-semibold mb-4">Pelatihan</h3>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="/synergy-academy" class="hover:text-white transition">Kursus Data Analitik</a></li>
                    <li><a href="/synergy-experts" class="hover:text-white transition">Instruktur Data Analitik</a></li>
                    <li><a href="/synergy-portfolio" class="hover:text-white transition">Portfolio Alumni</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="font-semibold mb-4">Perusahaan</h3>
                <ul class="space-y-2 text-gray-400">
                    <li><a href="/about" class="hover:text-white transition">Tentang Kami</a></li>
                    <li><a href="https://wa.me/6285697490726?text=Halo%20GROW%20SYNERGY%20INDONESIA%2C%20saya%20ingin%20bertanya" target="_blank" rel="noopener noreferrer" class="hover:text-white transition">Kontak</a></li>
                    <li><a href="/blog" class="hover:text-white transition">Blog</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="font-semibold mb-4">Ikuti Kami</h3>
                <div class="flex space-x-4 mb-4">
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-facebook text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                </div>
                <p class="text-gray-400">
                    <i class="fas fa-envelope mr-2"></i>grow.sindo@gmail.com
                </p>
                <p class="text-gray-400">
                    <i class="fas fa-phone mr-2"></i>+62 856-9749-0726
                </p>
            </div>
        </div>
        
        <div class="border-t border-gray-700 mt-8 pt-8">
            <!-- Mitra Section -->
            <div class="mb-8">
                <h3 class="text-center text-lg font-semibold text-white mb-6">Mitra Kami</h3>
                <div class="flex flex-wrap justify-center items-center gap-8">
                    <img src="/images/mitra/asdatin.png" alt="ASDATIN" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                    <img src="/images/mitra/ideaslab.png" alt="Ideas Lab" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                    <img src="/images/mitra/kompis.jpg" alt="Kompis" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                    <img src="/images/mitra/lambang_kota_tangerang_selatan.png" alt="Kota Tangerang Selatan" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                    <img src="/images/mitra/lembaga_sertifikasi_ti_bd.png" alt="Lembaga Sertifikasi TI BD" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                    <img src="/images/mitra/sinarmas.jpg" alt="Sinarmas" class="h-12 w-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300">
                </div>
            </div>
            
            <div class="text-center text-gray-400 border-t border-gray-700 pt-8">
                <p>&copy; 2024 GROW SYNERGY INDONESIA. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

    </main>

    <!-- JavaScript -->
    <script src="/js/main.js"></script>
    {{> firebase-config}}
    
    <script>
        // Auto-refresh hero section every 5 seconds
        function startAutoRefresh() {
            setInterval(() => {
                loadHeroSection();
            }, 5000);
        }
        
        // Start auto-refresh after initial load
        setTimeout(startAutoRefresh, 2000);
        let currentPage = 1;
        const itemsPerPage = 8; // Show 8 portfolios per page
        let allPortfolios = [];
        
        // Set active navigation based on current page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DEBUG: DOMContentLoaded fired for synergy-portfolio');
            const currentPageNav = 'synergy-portfolio';
            const navLinks = document.querySelectorAll('.nav-link');
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === currentPageNav) {
                    link.classList.add('active');
                }
            });

            console.log('DEBUG: About to call loadPortfolios and loadHeroSection...');
            // Load portfolios from Firestore
            loadPortfolios();
            // Load hero section data
            loadHeroSection();
            console.log('DEBUG: loadPortfolios and loadHeroSection called');
        });
        
        // Load portfolios from Firestore
        async function loadPortfolios() {
            try {
                console.log('DEBUG: Loading portfolios from Firestore...');
                console.log('DEBUG: Firebase db available:', !!window.db);
                
                // Test connection first
                console.log('DEBUG: Testing connection to portfolios collection...');
                const testDoc = await window.db.collection('portfolios').limit(1).get();
                console.log('DEBUG: Test connection successful, docs:', testDoc.docs.length);
                
                console.log('DEBUG: Fetching all portfolios...');
                const portfoliosSnapshot = await window.db.collection('portfolios').get();
                console.log('DEBUG: Snapshot received, docs count:', portfoliosSnapshot.docs.length);
                
                allPortfolios = portfoliosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                console.log('DEBUG: Portfolios loaded:', allPortfolios);
                console.log('DEBUG: Portfolios length:', allPortfolios.length);
                
                if (allPortfolios.length > 0) {
                    console.log('DEBUG: First portfolio data:', allPortfolios[0]);
                }
                
                // If no data from Firestore, use mock data
                if (allPortfolios.length === 0) {
                    console.log('DEBUG: No portfolios from Firestore, using mock data');
                    allPortfolios = getMockPortfolios();
                }
                
                // Update portfolios grid with pagination
                updatePortfolioGridWithPagination();
            } catch (error) {
                console.error('DEBUG: Error loading portfolios:', error);
                console.error('DEBUG: Error stack:', error.stack);
                console.error('DEBUG: Error code:', error.code);
                console.error('DEBUG: Error message:', error.message);
                // Use mock data if Firestore fails
                console.log('DEBUG: Falling back to mock data...');
                allPortfolios = getMockPortfolios();
                updatePortfolioGridWithPagination();
            }
        }
        
        // Mock data for portfolios (fallback)
        const mockPortfolios = [
            {
                id: 'mock-portfolio-1',
                title: 'E-commerce Analytics Platform',
                category: 'Data Analytics',
                image: 'https://picsum.photos/seed/portfolio1/400/300.jpg',
                description: 'Platform analitik untuk e-commerce dengan real-time dashboard.',
                technologies: ['Python', 'React', 'PostgreSQL'],
                projectUrl: '#',
                githubUrl: '#'
            },
            {
                id: 'mock-portfolio-2',
                title: 'Customer Segmentation System',
                category: 'Machine Learning',
                image: 'https://picsum.photos/seed/portfolio2/400/300.jpg',
                description: 'Sistem segmentasi pelanggan menggunakan machine learning.',
                technologies: ['Python', 'Scikit-learn', 'Pandas'],
                projectUrl: '#',
                githubUrl: '#'
            },
            {
                id: 'mock-portfolio-3',
                title: 'Sales Dashboard Automation',
                category: 'Business Intelligence',
                image: 'https://picsum.photos/seed/portfolio3/400/300.jpg',
                description: 'Dashboard otomatis untuk monitoring penjualan.',
                technologies: ['Tableau', 'SQL', 'Excel'],
                projectUrl: '#',
                githubUrl: '#'
            },
            {
                id: 'mock-portfolio-4',
                title: 'Mobile Banking App',
                category: 'Mobile Development',
                image: 'https://picsum.photos/seed/portfolio4/400/300.jpg',
                description: 'Aplikasi mobile banking dengan fitur transfer dan pembayaran.',
                technologies: ['React Native', 'Node.js', 'MongoDB'],
                projectUrl: '#',
                githubUrl: '#'
            },
            {
                id: 'mock-portfolio-5',
                title: 'Inventory Management System',
                category: 'Web Development',
                image: 'https://picsum.photos/seed/portfolio5/400/300.jpg',
                description: 'Sistem manajemen inventory dengan barcode scanning.',
                technologies: ['Vue.js', 'Laravel', 'MySQL'],
                projectUrl: '#',
                githubUrl: '#'
            },
            {
                id: 'mock-portfolio-6',
                title: 'AI Chatbot Integration',
                category: 'Artificial Intelligence',
                image: 'https://picsum.photos/seed/portfolio6/400/300.jpg',
                description: 'Chatbot AI untuk customer service automation.',
                technologies: ['Python', 'TensorFlow', 'NLP'],
                projectUrl: '#',
                githubUrl: '#'
            }
        ];
        
        // Load mock portfolios (fallback)
        function getMockPortfolios() {
            return [
                {
                    id: 'mock-portfolio-1',
                    title: 'E-commerce Analytics Platform',
                    category: 'Data Analytics',
                    image: 'https://picsum.photos/seed/portfolio1/400/300.jpg',
                    description: 'Platform analitik untuk e-commerce dengan real-time dashboard.',
                    technologies: ['Python', 'React', 'PostgreSQL'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-2',
                    title: 'Customer Segmentation System',
                    category: 'Machine Learning',
                    image: 'https://picsum.photos/seed/portfolio2/400/300.jpg',
                    description: 'Sistem segmentasi pelanggan menggunakan machine learning.',
                    technologies: ['Python', 'Scikit-learn', 'Pandas'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-3',
                    title: 'Sales Dashboard Automation',
                    category: 'Business Intelligence',
                    image: 'https://picsum.photos/seed/portfolio3/400/300.jpg',
                    description: 'Dashboard otomatis untuk monitoring penjualan.',
                    technologies: ['Tableau', 'SQL', 'Excel'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-4',
                    title: 'Mobile Banking App',
                    category: 'Mobile Development',
                    image: 'https://picsum.photos/seed/portfolio4/400/300.jpg',
                    description: 'Aplikasi mobile banking dengan fitur transfer dan pembayaran.',
                    technologies: ['React Native', 'Node.js', 'MongoDB'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-5',
                    title: 'Inventory Management System',
                    category: 'Web Development',
                    image: 'https://picsum.photos/seed/portfolio5/400/300.jpg',
                    description: 'Sistem manajemen inventory dengan barcode scanning.',
                    technologies: ['Vue.js', 'Laravel', 'MySQL'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-6',
                    title: 'AI Chatbot Integration',
                    category: 'Artificial Intelligence',
                    image: 'https://picsum.photos/seed/portfolio6/400/300.jpg',
                    description: 'Chatbot AI untuk customer service automation.',
                    technologies: ['Python', 'TensorFlow', 'NLP'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-7',
                    title: 'Social Media Analytics',
                    category: 'Data Science',
                    image: 'https://picsum.photos/seed/portfolio7/400/300.jpg',
                    description: 'Platform analitik untuk monitoring social media dan sentiment analysis.',
                    technologies: ['Python', 'Spark', 'Elasticsearch'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-8',
                    title: 'Healthcare Management System',
                    category: 'Web Development',
                    image: 'https://picsum.photos/seed/portfolio8/400/300.jpg',
                    description: 'Sistem manajemen rumah sakit dengan electronic health records.',
                    technologies: ['Angular', 'Spring Boot', 'PostgreSQL'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-9',
                    title: 'Real Estate Platform',
                    category: 'Full Stack Development',
                    image: 'https://picsum.photos/seed/portfolio9/400/300.jpg',
                    description: 'Platform properti dengan fitur listing, search, dan virtual tours.',
                    technologies: ['React', 'Node.js', 'MongoDB', 'Three.js'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-10',
                    title: 'Educational Learning Platform',
                    category: 'EdTech',
                    image: 'https://picsum.photos/seed/portfolio10/400/300.jpg',
                    description: 'Platform pembelajaran online dengan video streaming dan quiz interaktif.',
                    technologies: ['Vue.js', 'Django', 'WebRTC'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-11',
                    title: 'Financial Trading Dashboard',
                    category: 'FinTech',
                    image: 'https://picsum.photos/seed/portfolio11/400/300.jpg',
                    description: 'Dashboard trading real-time dengan advanced charting dan risk analysis.',
                    technologies: ['React', 'WebSocket', 'D3.js'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-12',
                    title: 'Supply Chain Management',
                    category: 'Logistics',
                    image: 'https://picsum.photos/seed/portfolio12/400/300.jpg',
                    description: 'Sistem manajemen rantai pasokan dengan tracking real-time.',
                    technologies: ['Angular', 'Java', 'PostgreSQL', 'GPS'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-13',
                    title: 'Video Streaming Service',
                    category: 'Media',
                    image: 'https://picsum.photos/seed/portfolio13/400/300.jpg',
                    description: 'Platform streaming video dengan adaptive bitrate dan CDN integration.',
                    technologies: ['React', 'Node.js', 'FFmpeg', 'AWS'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-14',
                    title: 'IoT Smart Home System',
                    category: 'IoT',
                    image: 'https://picsum.photos/seed/portfolio14/400/300.jpg',
                    description: 'Sistem smart home dengan device control dan energy monitoring.',
                    technologies: ['React Native', 'MQTT', 'Arduino', 'Raspberry Pi'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-15',
                    title: 'E-Learning Management System',
                    category: 'Education',
                    image: 'https://picsum.photos/seed/portfolio15/400/300.jpg',
                    description: 'Sistem manajemen pembelajaran dengan course creation dan progress tracking.',
                    technologies: ['Angular', 'Spring Boot', 'MySQL', 'WebRTC'],
                    projectUrl: '#',
                    githubUrl: '#'
                },
                {
                    id: 'mock-portfolio-16',
                    title: 'Restaurant POS System',
                    category: 'Retail',
                    image: 'https://picsum.photos/seed/portfolio16/400/300.jpg',
                    description: 'Sistem point of sale untuk restaurant dengan inventory integration.',
                    technologies: ['Vue.js', 'Express.js', 'MongoDB', 'Thermal Printer API'],
                    projectUrl: '#',
                    githubUrl: '#'
                }
            ];
        }
        
        // Update portfolios grid with pagination
        function updatePortfolioGridWithPagination() {
            const portfolioGrid = document.getElementById('portfolioGrid');
            if (!portfolioGrid) {
                console.log('DEBUG: Portfolio grid not found');
                return;
            }

            if (allPortfolios.length === 0) {
                console.log('DEBUG: No portfolios data available');
                return;
            }

            // Calculate start and end indices for current page
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentPortfolios = allPortfolios.slice(startIndex, endIndex);

            // Clear existing content
            portfolioGrid.innerHTML = '';

            // Add portfolio cards for current page
            currentPortfolios.forEach((portfolio, index) => {
                const portfolioCard = createPortfolioCard(portfolio);
                portfolioGrid.appendChild(portfolioCard);
            });
            
            // Update pagination buttons
            updatePaginationButtons();
            
            // Setup pagination event listeners (only once)
            setupPaginationListeners();
        }

        // Setup pagination event listeners
        function setupPaginationListeners() {
            const paginationButtons = document.querySelectorAll('button[data-page]');
            console.log('DEBUG: Pagination buttons found:', paginationButtons.length);
            console.log('DEBUG: All portfolios loaded:', allPortfolios.length);
            
            // Remove existing listeners to prevent duplicates
            paginationButtons.forEach(button => {
                button.replaceWith(button.cloneNode(true));
            });
            
            // Add new listeners
            const newPaginationButtons = document.querySelectorAll('button[data-page]');
            newPaginationButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const pageNumber = parseInt(this.dataset.page);
                    const totalPages = Math.ceil(allPortfolios.length / itemsPerPage);
                    
                    console.log('DEBUG: Button clicked:', pageNumber);
                    console.log('DEBUG: Total pages:', totalPages);
                    console.log('DEBUG: Current page before:', currentPage);
                    
                    if (pageNumber >= 1 && pageNumber <= totalPages) {
                        currentPage = pageNumber;
                        console.log('DEBUG: Current page after:', currentPage);
                        updatePortfolioGridWithPagination();
                        
                        // Scroll to center of portfolios section
                        setTimeout(() => {
                            const portfoliosSection = document.getElementById('portfolioGrid');
                            if (portfoliosSection) {
                                // Get the first visible card
                                const firstVisibleCard = portfoliosSection.querySelector('.portfolio-card:not([style*="display: none"])');
                                if (firstVisibleCard) {
                                    // Scroll to the first visible card
                                    firstVisibleCard.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'center'
                                    });
                                } else {
                                    // Fallback to section center
                                    console.log('Loading synergy-portfolio page - v2.2', new Date().toISOString());
        
        // Firebase will be initialized by firebase-config partial
        console.log('Firebase initialization will be handled by partial');
        
        // Wait for Firebase to be initialized before using it
        function waitForFirebase() {
            return new Promise((resolve) => {
                if (window.firebase && window.firebase.apps && window.firebase.apps.length > 0) {
                    resolve();
                } else {
                    setTimeout(() => waitForFirebase().then(resolve), 100);
                }
            });
        }
                                    const offset = sectionRect.top + window.pageYOffset - (window.innerHeight / 2) + (sectionRect.height / 2);
                                    window.scrollTo({
                                        top: offset,
                                        behavior: 'smooth'
                                    });
                                }
                            }
                        }, 100);
                    }
                });
            });
        }

        // Update pagination buttons
        function updatePaginationButtons() {
            const paginationButtons = document.querySelectorAll('button[data-page]');
            const totalPages = Math.ceil(allPortfolios.length / itemsPerPage);

            paginationButtons.forEach(button => {
                const pageNumber = parseInt(button.dataset.page);
                
                // Reset button styles
                button.className = 'px-3 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition';
                
                // Highlight current page
                if (pageNumber === currentPage) {
                    button.className = 'px-3 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition';
                }
                
                // Disable buttons beyond total pages
                if (pageNumber > totalPages) {
                    button.disabled = true;
                    button.className = 'px-3 py-2 rounded-lg bg-gray-100 text-gray-400 cursor-not-allowed transition';
                }
            });
        }
        
        // Update portfolios grid with data
        function updatePortfolioGrid(portfolios) {
            console.log('DEBUG: updatePortfolioGrid called with:', portfolios);
            const portfolioGrid = document.getElementById('portfolioGrid');
            const loadingIndicator = document.getElementById('loadingIndicator');
            
            console.log('DEBUG: Portfolio grid element found:', !!portfolioGrid);
            console.log('DEBUG: Loading indicator element found:', !!loadingIndicator);
            
            if (!portfolioGrid) {
                console.log('DEBUG: Portfolio grid not found');
                return;
            }

            // Remove loading indicator
            if (loadingIndicator) {
                console.log('DEBUG: Removing loading indicator');
                loadingIndicator.remove();
            }

            if (portfolios.length === 0) {
                console.log('DEBUG: No portfolios data available');
                // Show no data message
                const noDataMessage = document.createElement('div');
                noDataMessage.className = 'col-span-full text-center py-12';
                noDataMessage.innerHTML = `
                    <div class="text-6xl mb-4">ï¿½</div>
                    <h3 class="text-xl font-semibold mb-2 text-gray-600">Belum Ada Portfolio</h3>
                    <p class="text-gray-500">Portfolio akan segera ditampilkan. Silakan coba lagi nanti.</p>
                `;
                portfolioGrid.appendChild(noDataMessage);
                return;
            }

            console.log('DEBUG: Clearing existing content');
            // Clear existing content
            portfolioGrid.innerHTML = '';

            console.log('DEBUG: Adding portfolio cards');
            // Add portfolio cards
            portfolios.forEach((portfolio, index) => {
                console.log(`DEBUG: Processing portfolio ${index}:`, portfolio);
                const portfolioCard = createPortfolioCard(portfolio);
                portfolioGrid.appendChild(portfolioCard);
            });
            
            console.log('DEBUG: Portfolio section updated with', portfolios.length, 'items');
        }
        
        // Create portfolio card HTML using DOM methods
        function createPortfolioCard(portfolio) {
            const div = document.createElement('div');
            div.className = 'portfolio-card relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition cursor-pointer';
            
            // Add click event to show modal
            div.addEventListener('click', function() {
                showPortfolioModal(portfolio);
            });
            
            // Set category for filtering
            div.setAttribute('data-category', portfolio.category || 'general');
            
            // Use DOM methods to avoid template literal issues
            const portfolioImage = portfolio.image || 'https://picsum.photos/seed/portfolio-' + portfolio.id + '/400/300.jpg';
            const portfolioTitle = portfolio.title || 'Activity Title';
            const portfolioCategory = portfolio.category || 'Activity';
            const portfolioDescription = portfolio.description || 'Activity description';
            const portfolioTechnologies = Array.isArray(portfolio.technologies) ? portfolio.technologies : [];
            const portfolioProjectUrl = portfolio.projectUrl || portfolio.liveDemoUrl || '#';
            const portfolioGithubUrl = portfolio.githubUrl || portfolio.codeUrl || '#';
            
            // Create image container
            const imageContainer = document.createElement('div');
            imageContainer.className = 'relative h-64';
            
            const img = document.createElement('img');
            img.src = portfolioImage;
            img.alt = portfolioTitle;
            img.className = 'w-full h-full object-cover';
            imageContainer.appendChild(img);
            
            const gradientOverlay = document.createElement('div');
            gradientOverlay.className = 'absolute inset-0 bg-gradient-to-t from-black/70 to-transparent';
            imageContainer.appendChild(gradientOverlay);
            
            const textOverlay = document.createElement('div');
            textOverlay.className = 'absolute bottom-0 left-0 right-0 p-4';
            
            const titleEl = document.createElement('h3');
            titleEl.className = 'text-white font-bold text-lg mb-2';
            titleEl.textContent = portfolioTitle;
            textOverlay.appendChild(titleEl);
            
            
            const categoryContainer = document.createElement('div');
            categoryContainer.className = 'flex justify-between items-center';
            
            const categoryEl = document.createElement('span');
            categoryEl.className = 'text-white/80 text-xs';
            categoryEl.textContent = portfolioCategory;
            categoryContainer.appendChild(categoryEl);
            
            const techEl = document.createElement('span');
            techEl.className = 'text-white/80 text-xs';
            techEl.textContent = portfolioTechnologies[0] || '';
            categoryContainer.appendChild(techEl);
            
            textOverlay.appendChild(categoryContainer);
            imageContainer.appendChild(textOverlay);
            
            // Create content container
            const contentContainer = document.createElement('div');
            contentContainer.className = 'p-6';
            
            const overviewTitle = document.createElement('h4');
            overviewTitle.className = 'font-bold text-gray-800 mb-2';
            overviewTitle.textContent = 'Activity Overview';
            contentContainer.appendChild(overviewTitle);
            
            const overviewDesc = document.createElement('p');
            overviewDesc.className = 'text-gray-600 mb-4';
            // Truncate description for card display only
            const truncatedOverview = portfolioDescription.length > 20 ? 
                portfolioDescription.substring(0, 20) + '...' : 
                portfolioDescription;
            overviewDesc.textContent = truncatedOverview;
            contentContainer.appendChild(overviewDesc);
            
            // Create technologies tags
            const techContainer = document.createElement('div');
            techContainer.className = 'flex flex-wrap gap-2 mb-4';
            
            portfolioTechnologies.slice(0, 3).forEach(tech => {
                const techTag = document.createElement('span');
                techTag.className = 'bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded';
                techTag.textContent = tech;
                techContainer.appendChild(techTag);
            });
            
            contentContainer.appendChild(techContainer);
            
            // Create links
            const linksContainer = document.createElement('div');
            linksContainer.className = 'flex justify-between';
            
            const docLink = document.createElement('a');
            docLink.href = '#';
            docLink.className = 'text-blue-600 hover:text-blue-800 font-medium cursor-pointer';
            docLink.textContent = 'Sentuh untuk melihat detail';
            docLink.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                showPortfolioModal(portfolio);
            });
            linksContainer.appendChild(docLink);
            
            contentContainer.appendChild(linksContainer);
            
            // Append all to main div
            div.appendChild(imageContainer);
            div.appendChild(contentContainer);
            
            return div;
        }

        // Modal functionality
        function showPortfolioModal(portfolio) {
            const modal = document.getElementById('portfolioModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalImage = document.getElementById('modalImage');
            const modalContent = document.getElementById('modalContent');
            
            // Set modal content
            modalTitle.textContent = portfolio.title || 'Portfolio Detail';
            
            // Set modal image
            const portfolioImage = portfolio.image || 'https://picsum.photos/seed/portfolio-' + portfolio.id + '/800/400.jpg';
            modalImage.innerHTML = `
                <img src="${portfolioImage}" alt="${portfolio.title}" class="w-full h-64 object-cover rounded-lg">
            `;
            
            // Set modal content
            const technologies = Array.isArray(portfolio.technologies) ? portfolio.technologies : [];
            const projectUrl = portfolio.projectUrl || portfolio.liveDemoUrl || '#';
            const githubUrl = portfolio.githubUrl || portfolio.codeUrl || '#';
            
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-3">Deskripsi Proyek</h3>
                        <p class="text-gray-600 leading-relaxed max-w-full break-words overflow-wrap-anywhere">${portfolio.description || portfolio.overview || 'Tidak ada deskripsi tersedia.'}</p>
                    </div>
                    
                    ${portfolio.overview ? `
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-3">Ringkasan Proyek</h3>
                        <p class="text-gray-600 leading-relaxed max-w-full break-words overflow-wrap-anywhere">${portfolio.overview}</p>
                    </div>
                    ` : ''}
                    
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-3">Topic</h3>
                        <div class="flex flex-wrap gap-2">
                            ${technologies.map(tech => `
                                <span class="bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full">${tech}</span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-3">Kategori</h3>
                        <span class="bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded-full">${portfolio.category || 'General'}</span>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-4">
                        ${projectUrl !== '#' ? `
                        <a href="${projectUrl}" target="_blank" class="flex-1 bg-blue-600 text-white text-center py-3 px-6 rounded-lg hover:bg-blue-700 transition">
                            <i class="fas fa-image mr-2"></i>
                            Lihat Dokumentasi
                        </a>
                        ` : ''}
                        
                        ${githubUrl !== '#' ? `
                        <a href="${githubUrl}" target="_blank" class="flex-1 bg-gray-800 text-white text-center py-3 px-6 rounded-lg hover:bg-gray-900 transition">
                            <i class="fas fa-certificate mr-2"></i>
                            Lihat Certificate
                        </a>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Show modal
            modal.classList.remove('hidden');
            document.body.classList.add('modal-open');
        }
        
        function closePortfolioModal() {
            const modal = document.getElementById('portfolioModal');
            modal.classList.add('hidden');
            document.body.classList.remove('modal-open');
        }
        
        // Close modal when clicking outside
        document.getElementById('portfolioModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePortfolioModal();
            }
        });
        
        // Close modal when clicking close button
        document.getElementById('closeModal').addEventListener('click', closePortfolioModal);

        // Enhanced search functionality with pagination support and glitch prevention
        let searchTimeout;
        let isSearching = false;
        
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            // Clear previous timeout
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            
            // Debounce search to prevent glitches
            searchTimeout = setTimeout(() => {
                if (isSearching) return; // Prevent multiple simultaneous searches
                isSearching = true;
                
                if (searchTerm.length === 0) {
                    // Reset to first page when search is cleared
                    currentPage = 1;
                    updatePortfolioGridWithPagination();
                    isSearching = false;
                    return;
                }
                
                // Search through all portfolios to find matches
                const matchingPortfolios = [];
                allPortfolios.forEach((portfolio, index) => {
                    const title = portfolio.title.toLowerCase();
                    const description = portfolio.description.toLowerCase();
                    const overview = portfolio.overview ? portfolio.overview.toLowerCase() : '';
                    const category = portfolio.category ? portfolio.category.toLowerCase() : '';
                    const technologies = portfolio.technologies ? portfolio.technologies.join(' ').toLowerCase() : '';
                    
                    // Combine all searchable text
                    const allText = title + ' ' + description + ' ' + overview + ' ' + category + ' ' + technologies;
                    
                    if (allText.includes(searchTerm)) {
                        matchingPortfolios.push({
                            ...portfolio,
                            originalIndex: index
                        });
                    }
                });
                
                console.log('Search term:', searchTerm);
                console.log('Matching portfolios:', matchingPortfolios.length);
                
                if (matchingPortfolios.length === 0) {
                    // Show no results message
                    const portfolioGrid = document.getElementById('portfolioGrid');
                    portfolioGrid.innerHTML = `
                        <div id="noResultsMessage" class="col-span-full text-center py-8 text-gray-500">
                            <div class="text-6xl mb-4">ð</div>
                            <h3 class="text-xl font-semibold mb-2">Tidak ada hasil ditemukan</h3>
                            <p>Tidak ada kegiatan yang cocok dengan pencarian "${searchTerm}"</p>
                        </div>
                    `;
                    isSearching = false;
                    return;
                }
                
                // Find the page where the first matching portfolio is located
                const firstMatchIndex = matchingPortfolios[0].originalIndex;
                const targetPage = Math.floor(firstMatchIndex / itemsPerPage) + 1;
                
                console.log('First match index:', firstMatchIndex);
                console.log('Target page:', targetPage);
                
                // Switch to the target page
                currentPage = targetPage;
                updatePortfolioGridWithPagination();
                
                // Highlight matching portfolios on the current page
                setTimeout(() => {
                    const portfolioCards = document.querySelectorAll('.portfolio-card');
                    portfolioCards.forEach(card => {
                        const title = card.querySelector('h3')?.textContent.toLowerCase() || '';
                        const description = card.querySelector('p.text-white\\/80')?.textContent.toLowerCase() || '';
                        const overview = card.querySelector('p.text-gray-600')?.textContent.toLowerCase() || '';
                        const category = card.querySelector('div.flex.justify-between.items-center span:first-child')?.textContent.toLowerCase() || '';
                        const technologies = Array.from(card.querySelectorAll('.bg-blue-100')).map(el => el.textContent.toLowerCase()).join(' ') || '';
                        
                        const allText = title + ' ' + description + ' ' + overview + ' ' + category + ' ' + technologies;
                        
                        if (allText.includes(searchTerm)) {
                            // Highlight matching card
                            card.classList.add('ring-2', 'ring-blue-500', 'ring-offset-2');
                            // Remove auto-scroll to keep search bar visible
                            // card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        } else {
                            card.classList.remove('ring-2', 'ring-blue-500', 'ring-offset-2');
                        }
                    });
                    isSearching = false;
                }, 300); // Increased delay to ensure grid is fully updated
            }, 300); // Debounce delay
        });

        // Filter functionality
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Update active button
                document.querySelectorAll('.filter-btn').forEach(b => {
                    b.classList.remove('bg-blue-600', 'text-white');
                    b.classList.add('bg-gray-200', 'text-gray-700');
                });
                this.classList.remove('bg-gray-200', 'text-gray-700');
                this.classList.add('bg-blue-600', 'text-white');
                
                // Filter cards
                const filter = this.dataset.filter;
                const portfolioCards = document.querySelectorAll('.portfolio-card');
                
                portfolioCards.forEach(card => {
                    if (filter === 'all' || card.dataset.category === filter) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Check if any cards are visible
                const visibleCards = document.querySelectorAll('.portfolio-card:not([style*="display: none"])');
                const portfolioGrid = document.getElementById('portfolioGrid');
                
                if (visibleCards.length === 0) {
                    // Show no results message
                    portfolioGrid.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <div class="text-6xl mb-4">ð</div>
                            <h3 class="text-xl font-semibold mb-2 text-gray-800">Tidak ada portfolio ditemukan</h3>
                            <p class="text-gray-600 mb-4">Tidak ada portfolio dengan kategori "${this.textContent.trim()}"</p>
                            <button onclick="resetFilterToAll()" class="px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">
                                <i class="fas fa-th mr-1"></i>Lihat Semua Portfolio
                            </button>
                        </div>
                    `;
                }
            });
        });
        
        // Function to reset filter to all
        function resetFilterToAll() {
            // Reset all filter buttons to make "All" active
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('bg-blue-600', 'text-white');
                b.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // Make "All" button active
            const allBtn = document.querySelector('[data-filter="all"]');
            if (allBtn) {
                allBtn.classList.remove('bg-gray-200', 'text-gray-700');
                allBtn.classList.add('bg-blue-600', 'text-white');
            }
            
            // Show all portfolio cards
            const portfolioCards = document.querySelectorAll('.portfolio-card');
            portfolioCards.forEach(card => {
                card.style.display = 'block';
            });
            
            // Reload portfolio data to restore original grid
            loadPortfolioData();
        }
    </script>
    
    <script>
        // Load hero section data from API
        async function loadHeroSection() {
            console.log('DEBUG: Starting loadHeroSection for synergy-portfolio...');
            try {
                console.log('DEBUG: Fetching from /api/hero-section...');
                const response = await fetch('/api/hero-section');
                const heroSections = await response.json();
                console.log('DEBUG: Hero sections response:', heroSections);
                
                if (heroSections.length > 0) {
                    const hero = heroSections[0]; // Use the first hero section
                    console.log('DEBUG: Using hero section:', hero);
                    const backgroundImage = document.getElementById('hero-background-image');
                    
                    console.log('DEBUG: Background image element found:', !!backgroundImage);
                    
                    // Update background image
                    if (hero.backgroundImage && backgroundImage) {
                        console.log('DEBUG: Updating background image to:', hero.backgroundImage);
                        backgroundImage.style.backgroundImage = `url('${hero.backgroundImage}')`;
                        console.log('DEBUG: Background image updated successfully');
                    } else {
                        console.log('DEBUG: No background image or element not found');
                    }
                    
                    console.log('DEBUG: Hero section loaded successfully for synergy-portfolio:', hero);
                } else {
                    console.log('DEBUG: No hero sections found');
                }
            } catch (error) {
                console.error('DEBUG: Error loading hero section for synergy-portfolio:', error);
                // Keep default content if API fails
            }
        }
        
        // Load hero section when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadHeroSection();
            
            // Mobile menu functionality
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const closeMenuBtn = document.getElementById('close-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.remove('hidden');
                });
            }
            
            if (closeMenuBtn && mobileMenu) {
                closeMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.add('hidden');
                });
            }
            
            // Close menu when clicking on links
            const mobileLinks = mobileMenu?.querySelectorAll('a');
            if (mobileLinks) {
                mobileLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenu.classList.add('hidden');
                    });
                });
            }
            
            // Load hero section background
            loadHeroSection();
        });
        
        // Load Hero Section Background
        async function loadHeroSection() {
            try {
                console.log('Loading hero section background...');
                console.log('DEBUG: Firebase db available:', !!db);
                
                // Test Firebase connection
                try {
                    const testDoc = await db.collection('heroSection').limit(1).get();
                    console.log('DEBUG: Firebase test connection successful, docs:', testDoc.docs.length);
                } catch (testError) {
                    console.log('DEBUG: Firebase test connection failed:', testError);
                    return;
                }
                
                // Load hero sections from Firebase
                const heroSectionsSnapshot = await db.collection('heroSection').get();
                const heroSections = [];
                
                heroSectionsSnapshot.docs.forEach(doc => {
                    const data = doc.data();
                    if (data.backgroundImage) {
                        heroSections.push({
                            id: doc.id,
                            backgroundImage: data.backgroundImage
                        });
                    }
                });
                
                console.log('Hero sections data:', heroSections);
                console.log('Hero sections length:', heroSections.length);
                
                // Update hero background
                const backgroundDiv = document.getElementById('hero-background-image');
                if (backgroundDiv) {
                    console.log('Background div found:', backgroundDiv);
                    
                    if (heroSections.length > 0) {
                        // Use first hero section background
                        const firstSection = heroSections[0];
                        if (firstSection.backgroundImage) {
                            backgroundDiv.style.backgroundImage = `url(${firstSection.backgroundImage})`;
                            console.log('Setting background from Firebase:', firstSection.backgroundImage);
                        }
                    } else {
                        // Fallback to default
                        console.log('No hero sections found, using fallback background');
                        backgroundDiv.style.backgroundImage = 'url("https://picsum.photos/seed/hero1/1920/1080.jpg")';
                    }
                    
                    console.log('Final background style:', backgroundDiv.style.backgroundImage);
                } else {
                    console.log('Background div not found');
                }
                
            } catch (error) {
                console.error('Error loading hero section:', error);
                
                // Fallback to default background
                const backgroundDiv = document.getElementById('hero-background-image');
                if (backgroundDiv) {
                    backgroundDiv.style.backgroundImage = 'url("https://picsum.photos/seed/hero1/1920/1080.jpg")';
                    console.log('Set fallback background due to error');
                }
            }
        }
    </script>
    
    <!-- WhatsApp Floating Button -->
    {{> whatsapp-button}}
</body>
</html>
